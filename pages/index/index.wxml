<!--index.wxml-->
<view class="mainPanel">
  <scroll-view class='outputPanel' style='height:{{ srollHeight }}px'  scroll-y="true" scroll-top="{{ scrollTop }}">
    <view class='outputArea'>
         <template is="outputItem" data="{{ outputItems }}"></template> 
         
          <!-- -->
          <!-- <navigator url='../out/out' hover-class="none">
            <view class="robot-imgtxt-chat">
            <view class='robot-imgmsg'>
              <view class='img-content'>
                <image src="../../images/robot-head.jpg"></image>
              </view>
              <view class='text-content'>
                <text>图文消息</text>
              </view>
            </view>
          </view> 
           </navigator> -->

          
          <view class="robot-imgtxt-chat" bindtap='toOtherPage' data-type='toH5' data-url='http://www.baidu.com'>
            <view class='robot-imgmsg'>
              <view class='img-content'>
                <image src="../../images/robot-head.jpg"></image>
              </view>
              <view class='text-content'>
                <text>图文消息图文消息</text>
              </view>
            </view>
          </view>  
    </view>
    
  </scroll-view>
  <view class='inputPanel'>
    <view class='inputArea'>
      <input class='inputText' type='text' placeholder='请输入您的问题' placeholder-style='font-size:12px' bindinput='questionInput' value='{{ inputTxt }}'></input>
    </view>
    <view class='btn'>
      <button bindtap='sendMsg'>发送</button>
    </view>
  </view>
</view>
 
<template name='outputItem'>
  <block wx:for="{{ outputItems }}" wx:key="item">
    <block wx:if="{{ item.position == 'left' }}">
      <view class='robot-chat'>
        <view class='robot-head'>
          <image src='../../images/robot-head.jpg'></image>
        </view>
        <view class='robot-content'>
          <view wx:if="{{ item.data.type == 15}}">
              <text>{{ item.data.content }}</text>
              <view>
                <button class="toOtherPage" bindtap='toOtherPage' data-title='{{ item.data.object.title}}'>查看译文</button>
              </view>  
          </view>
          <view wx:if="{{ item.data.type != 15}}">
            <view>{{ item.data.content }}</view>
          </view>
        </view>
      </view>
    </block>

    <block wx:if="{{ item.position == 'right' }}">
      <view class='user-chat'>
        <view class='user-head'>
          <image src='../../images/user-head.jpg'></image>
        </view>
        <view class='user-content'>
          <text>{{ item.data.content }}</text>
        </view>       
      </view>
    </block>
  </block>
</template>
